{% extends "base.html" %}
{% load static %}
{% load query_params %}



{% block content %}

    {% if not query %}
    <section class="main-carousel-section mt-4">
        <div class="container">
            <div id="homeCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
                
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#homeCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#homeCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#homeCarousel" data-bs-slide-to="2"></button>
                </div>

                <div class="carousel-inner rounded-3 shadow-sm overflow-hidden">
                    
                    <div class="carousel-item active">
                        <img src="{% static 'img/banner/banner1.png' %}" class="d-block w-100 main-banner-img" alt="Banner 1">
                    </div>

                    <div class="carousel-item">
                        <img src="{% static 'img/banner/banner2.png' %}" class="d-block w-100 main-banner-img" alt="Banner 2">
                    </div>
                    
                    <div class="carousel-item">
                        <img src="{% static 'img/banner/banner3.png' %}" class="d-block w-100 main-banner-img" alt="Banner 3">
                    </div>
                </div>
                
                <button class="carousel-control-prev" type="button" data-bs-target="#homeCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#homeCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div> 
        </div>
    </section>
    {% endif %}

    <section class="product-highlight-section container-fluid mt-4 mb-5" id="product-list">
    
    <div class="row justify-content-center">
        
        <div class="col-12 col-xl-10"> 
            
            <h2 class="section-title text-center mb-4" style="color: #0d6efd; font-weight: bold; text-transform: uppercase;">
                {% if query %}
                    KẾT QUẢ TÌM KIẾM: "{{ query }}"
                {% else %}
                    SẢN PHẨM KHUYẾN MÃI HOT
                {% endif %}
            </h2>
            
            <div class="product-grid row g-3 row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5"> 
                {% for sp in san_pham %}
                    <div class="col"> 
                        {% include "includes/product_card.html" %}
                    </div>
                {% empty %}
                    <div class="col-12 text-center py-5">
                        <p>Không tìm thấy sản phẩm nào.</p>
                    </div>
                {% endfor %}
            </div>
            
            <div class="mt-5">
                {% include "includes/pagination.html" with products=san_pham scroll_to="#product-list" %}
            </div>

        </div> </div> </section>

    {% endblock %}